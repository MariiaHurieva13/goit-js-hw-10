{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from \"flatpickr\";\nimport \"flatpickr/dist/flatpickr.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst input = document.querySelector(\"#datetime-picker\");\nconst btnStart = document.querySelector(\"button\");\nlet userSelectedDate = null;\n\nbtnStart.disabled=true;\n\nlet calendar = flatpickr(input, {\n    enableTime: true,\n    time_24hr: true,\n    defaultDate: new Date(),\n    minuteIncrement: 1,\n    locale: {\n      firstDayOfWeek:1,  \n    },\n    onClose(selectedDates) {\n      userSelectedDate =  selectedDates[0]\n      if (userSelectedDate - Date.now()<0) {\n        btnStart.disabled = true;\n        iziToast.show({\n                backgroundColor: 'rgba(239, 64, 64, 1)',\n                messageColor: `rgba(255, 255, 255, 1)`,\n                close: `true`,\n                position: \"topRight\",\n                title: 'Error',\n                titleColor: '#fff',\n                titleSize: '16px',\n                message: 'Please choose a date in the future'\n      });\n    } else {\n        btnStart.disabled = false;\n    };\n   },\n  });\n\n\nbtnStart.addEventListener(\"click\", () => {\n    \n    timer.start ();\n})\n\nconst timer = {\n\n   intervalId: null,\n\n   start () { \n    this.intervalId = setInterval (()=>{\n    this.tik()}, 1000);\n    btnStart.disabled = true;\n    input.disabled = true;\n   },\n\n   stop() {\n    clearInterval(this.intervalId);\n    ShowTime({'days':'00',      'hours': '00',      'minutes': '00',      'seconds': '00'     })\n    input.disabled = false;\n   },\n\n   tik () {\n    const currentTime = Date.now();\n    const ms =  userSelectedDate - currentTime;\n    if (ms<=0) {\n\n        this.stop();\n    }\n    const time = convertMs(ms);\n    \n    const str = addLeadingZero(time);\n    \n    ShowTime(str)\n   }\n};\n\nfunction ShowTime(tt){\n  if(tt.seconds.indexOf('-')>-1) return\n  document.querySelector(\"span[data-days]\").textContent=tt.days;\n  document.querySelector(\"span[data-hours]\").textContent=tt.hours;\n  document.querySelector(\"span[data-minutes]\").textContent=tt.minutes;\n  document.querySelector(\"span[data-seconds]\").textContent=tt.seconds;\n}\n\n\nfunction convertMs(ms) {\n    const second = 1000;\n    const minute = second * 60;\n    const hour = minute * 60;\n    const day = hour * 24;\n    const days = Math.floor(ms / day);\n    const hours = Math.floor((ms % day) / hour);\n    const minutes = Math.floor(((ms % day) % hour) / minute);\n    const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n  \n    return { days, hours, minutes, seconds };\n  }\n\nfunction addLeadingZero ({ days, hours, minutes, seconds }) {\n    days = days.toString().padStart(2, \"0\");\n    hours = hours.toString().padStart(2, \"0\");\n    minutes = minutes.toString().padStart(2, \"0\");\n    seconds = seconds.toString().padStart(2, \"0\");\n    return {days,hours,minutes,seconds};\n}\n\n\n\n\n  \n /*console.log(convertMs(2000)); // {days: 0, hours: 0, minutes: 0, seconds: 2}\n  console.log(convertMs(140000)); // {days: 0, hours: 0, minutes: 2, seconds: 20}\n  console.log(convertMs(24140000)); // {days: 0, hours: 6 minutes: 42, seconds: 20}*/\n\n\n\n\n\n\n\n\n\n/*\n\n\n    //.value.dataset.days\n    //const str = timeToStr(time);\n    //console.log(str);\n\n\n\n\nfunction getTimeComponent (ms) {\n    const days = Math.floor(ms % (1000*60*60*24));\n    const hours = Math.floor((ms%(1000*60*60*24))/(1000*60*60));\n    const mins = Math.floor((ms%(1000*60*60))/(1000*60));\n    const secs = Math.floor((ms%(1000*60))/1000);\n    \n    const field = document.querySelector(\".value\");\n    let dayText = field.dataset.days;\n    console.log(dayText);\n\n\n    const obj = {days, hours, mins, secs};\n   // console.log(obj);\n    return obj;\n    \n}\n\nfunction timeToStr ({days, hours, mins, secs}) {\n    \n\n\n*/\n"],"names":["input","btnStart","userSelectedDate","flatpickr","selectedDates","iziToast","timer","ShowTime","currentTime","ms","time","convertMs","str","addLeadingZero","tt","days","hours","minutes","seconds"],"mappings":"2GAKA,MAAMA,EAAQ,SAAS,cAAc,kBAAkB,EACjDC,EAAW,SAAS,cAAc,QAAQ,EAChD,IAAIC,EAAmB,KAEvBD,EAAS,SAAS,GAEHE,EAAUH,EAAO,CAC5B,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,OAAQ,CACN,eAAe,CAChB,EACD,QAAQI,EAAe,CACrBF,EAAoBE,EAAc,CAAC,EAC/BF,EAAmB,KAAK,IAAG,EAAG,GAChCD,EAAS,SAAW,GACpBI,EAAS,KAAK,CACN,gBAAiB,uBACjB,aAAc,yBACd,MAAO,OACP,SAAU,WACV,MAAO,QACP,WAAY,OACZ,UAAW,OACX,QAAS,oCACzB,CAAO,GAECJ,EAAS,SAAW,EAExB,CACJ,CAAG,EAGHA,EAAS,iBAAiB,QAAS,IAAM,CAErCK,EAAM,MAAK,CACf,CAAC,EAED,MAAMA,EAAQ,CAEX,WAAY,KAEZ,OAAS,CACR,KAAK,WAAa,YAAa,IAAI,CACnC,KAAK,IAAG,CAAE,EAAG,GAAI,EACjBL,EAAS,SAAW,GACpBD,EAAM,SAAW,EACjB,EAED,MAAO,CACN,cAAc,KAAK,UAAU,EAC7BO,EAAS,CAAC,KAAO,KAAW,MAAS,KAAW,QAAW,KAAW,QAAW,KAAU,EAC3FP,EAAM,SAAW,EACjB,EAED,KAAO,CACN,MAAMQ,EAAc,KAAK,MACnBC,EAAMP,EAAmBM,EAC3BC,GAAI,GAEJ,KAAK,KAAI,EAEb,MAAMC,EAAOC,EAAUF,CAAE,EAEnBG,EAAMC,EAAeH,CAAI,EAE/BH,EAASK,CAAG,CACZ,CACJ,EAEA,SAASL,EAASO,EAAG,CAChBA,EAAG,QAAQ,QAAQ,GAAG,EAAE,KAC3B,SAAS,cAAc,iBAAiB,EAAE,YAAYA,EAAG,KACzD,SAAS,cAAc,kBAAkB,EAAE,YAAYA,EAAG,MAC1D,SAAS,cAAc,oBAAoB,EAAE,YAAYA,EAAG,QAC5D,SAAS,cAAc,oBAAoB,EAAE,YAAYA,EAAG,QAC9D,CAGA,SAASH,EAAUF,EAAI,CAKnB,MAAMM,EAAO,KAAK,MAAMN,EAAK,KAAG,EAC1BO,EAAQ,KAAK,MAAOP,EAAK,MAAO,IAAI,EACpCQ,EAAU,KAAK,MAAQR,EAAK,MAAO,KAAQ,GAAM,EACjDS,EAAU,KAAK,MAAST,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAM,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACvC,CAEH,SAASL,EAAgB,CAAE,KAAAE,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAI,CACxD,OAAAH,EAAOA,EAAK,SAAQ,EAAG,SAAS,EAAG,GAAG,EACtCC,EAAQA,EAAM,SAAQ,EAAG,SAAS,EAAG,GAAG,EACxCC,EAAUA,EAAQ,SAAQ,EAAG,SAAS,EAAG,GAAG,EAC5CC,EAAUA,EAAQ,SAAQ,EAAG,SAAS,EAAG,GAAG,EACrC,CAAC,KAAAH,EAAK,MAAAC,EAAM,QAAAC,EAAQ,QAAAC,CAAO,CACtC"}